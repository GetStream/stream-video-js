---
title: Participant sorting
description: Overview of the Sorting API used to sort call participants.
---

## Introduction

The Participant Sorting API is a powerful tool built on top of the internal `Comparator<T>` API,
providing developers with the ability to sort participants in various scenarios. This API offers common comparators and built-in presets that can be easily customized or used out-of-the-box, making participant sorting a seamless experience.

When dealing with real-time communication applications, it is often necessary to sort participants based on specific criteria.
Whether you need to adjust the sorting in existing view layouts or define new sorting presets, the **Participant Sorting API** is here to simplify the process.

By utilizing the `Comparator<T>` API and the provided built-in comparators and presets, developers can effortlessly sort participants according to their requirements.

## `Comparator<T>` API overview

The `Comparator<T>` API is the foundation upon which the Participant Sorting API is built.
It defines a function type `Comparator<T>` that takes two arguments `a` and `b` of type `T` and returns `-1`, `0`, or `1` based on the comparison between the two items.
This API allows developers to create custom comparators tailored to their specific needs.

```ts
import {
  Comparator,
  combineComparators,
  descending,
} from '@stream-io/video-react-sdk';

type Participant = {
  id: number;
  name: string;
};

// comparator that sorts by name in ascending order
const byName: Comparator<Participant> = (a, b) => {
  if (a.name < b.name) return -1;
  if (a.name > b.name) return 1;
  return 0;
};

// comparator that sorts by id in ascending order
const byId: Comparator<Participant> = (a, b) => {
  if (a.id < b.id) return -1;
  if (a.id > b.id) return 1;
  return 0;
};

// creates a new comparator that sorts by name in descending order
const byNameDescending: Comparator<Participant> = descending(byName);

// combineComparator creates a new Comparator<T> that combines the provided comparators in one.
// this comparator will sort by name in descending order and then by id in ascending order
const sortingCriteria = combineComparators(byNameDescending, byId);
```

:::tip
The `Comparator<T>` API is quite generic and can be used to sort any type of data.
:::

## Built-in common comparators

The Participant Sorting API provides a set of common comparators that cover common sorting scenarios.
These comparators are specifically designed for participant sorting and offer convenience when defining sorting criteria.

The built-in common comparators include:

- `dominantSpeaker`: Sorts participants based on their dominance in the call.
- `speaking`: Sorts participants based on whether they are currently speaking.
- `screenSharing`: Sorts participants based on whether they are currently screensharing.
- `publishingVideo`: Sorts participants based on whether they are currently publishing video.
- `publishingAudio`: Sorts participants based on whether they are currently publishing audio.
- `pinned`: Sorts participants based on whether they are pinned in the user interface.
- `reactionType(type)`: Sorts participants based on the type of reaction they have.
- `role(...roles)`: Sorts participants based on their assigned role.
- `name`: Sorts participants based on their name.

All of these comparators are available in the `@stream-io/video-react-sdk` package and can be imported as follows:

```ts
import {
  dominantSpeaker,
  speaking,
  screenSharing,
  publishingVideo,
  publishingAudio,
  pinned,
  reactionType,
  role,
  name,
} from '@stream-io/video-react-sdk';
```

These built-in comparators serve as a starting point for sorting participants
and can be used individually or combined to create more complex sorting criteria.

## Built-in sorting presets

To further simplify participant sorting, the Participant Sorting API offers built-in presets.
These presets are pre-configured sorting criteria linked to specific call types, reducing the effort required to define sorting rules.

The following presets are available:

- `defaultSortPreset`: The default sorting preset applicable to general call scenarios.
- `speakerLayoutSortPreset`: A preset specifically designed for the [`'default'` call type](../02-guides/05-call-types.mdx#default), optimizing participant sorting for speaker layout view.
- `livestreamOrAudioRoomSortPreset`: A preset tailored for the [`'livestream'`](../02-guides/05-call-types.mdx#livestream) and [`'audio_room'`](../02-guides/05-call-types.mdx#audio-room) call types, ensuring optimal participant sorting in livestream or audio room scenarios.

These presets are directly applied to the [Call's sorting mechanism](todo docs link).
For custom call types, unless specified otherwise, our SDK would use the `defaultSortPreset` preset.

All of these presets are available in the `@stream-io/video-react-sdk` package and can be imported as follows:

```ts
import {
  defaultSortPreset,
  speakerLayoutSortPreset,
  livestreamOrAudioRoomSortPreset,
} from '@stream-io/video-react-sdk';
```

:::tip

For your custom call types, you can define your own participant sorting presets and register them generally in the SDK.

Check the next section to learn how.

:::

## Sorting customization on the call level

The Participant Sorting API allows dynamic sorting customization during runtime.
Developers can utilize the [`call.setSortParticipantsBy(comparator)`](../../call-engine/Call#setsortparticipantsby) API to change the sorting criteria based on user interactions or application logic.
This flexibility empowers developers to provide sorting controls within their application, giving users the ability to customize participant sorting according to their preferences.

Lets take a look at an example:

```ts
import {
  useCall,
  combineComparators,
  dominantSpeaker,
  publishingVideo,
  publishingAudio,
  screensharing,
  speaking,
  reactionType,
  pinnned,
} from '@stream-io/video-react-sdk';

// ... boilerplate code

// we take the existing call instance
const call = useCall();

// we create a new comparator that combines the built-in comparators
// and sorts participants by the following criteria:
const comparator = combineComparators(
  pinned, // 1. pinned participants first
  screenSharing, // 2. participants who are screensharing
  dominantSpeaker, // 3. dominant speaker
  reactionType('raised-hand'), // 4. participants with raised hand
  speaking, // 5. participants currently speaking
  publishingVideo, // 6. participants publishing video
  publishingAudio, // 7. participants publishing audio
  // 8. everyone else
);

// will apply the new sorting criteria immediately
call.setSortParticipantsBy(comparator);
```

## Sorting customization on the call type

Sometimes, you want to keep your UI components free from sorting logic and instead, define sorting criteria per call type.
In order to do so, you can register your own sorting presets for your custom call types or override the existing ones
by using our SDK's `CallTypes` registry.

```ts
import { combineComparators, CallTypes } from '@stream-io/video-react-sdk';

// setup your custom sorting preset
const myCustomSortPreset = combineComparators(/* ... */);

// update existing type
CallTypes.get('default').options.sortParticipantsBy = myCustomSortPreset;

// register new type
CallTypes.register(new CallType('my-custom-type', {
  options: {
    sortParticipantsBy: myCustomSortPreset,
  },
});
```

## Disabling participant sorting

In some cases, you may want to disable participant sorting altogether.
This can be achieved by setting our special `noopComparator` as the sorting criteria of the Call or the CallType.

```ts
import { noopComparator, useCall } from '@stream-io/video-react-sdk';

const call = useCall();
call.setSortParticipantsBy(noopComparator);
```
