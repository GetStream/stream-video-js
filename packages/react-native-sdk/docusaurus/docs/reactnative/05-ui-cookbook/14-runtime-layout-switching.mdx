---
id: runtime-layout-switching
title: Runtime layout switching
---

:::warning
Write React Native Specifics

This documentation is for the beta version of the Stream Video SDK.
The SDK is subject to change.
:::

[//]: # ()
[//]: # (During your application's lifecycle there will be situations where you'll want to direct your users to a different [video layout]&#40;./04-video-layout.mdx&#41; upon certain event. In this case we'll explore how to automatically switch to a video layout that is better suited for when any of the participants starts a screen share session.)

[//]: # ()
[//]: # (### Defining Stage component)

[//]: # ()
[//]: # (In this guide, we'll introduce a concept component called `Stage` that'll handle the automatic switching logic and renders appropriate layout component.)

[//]: # ()
[//]: # (```tsx)

[//]: # (import {)

[//]: # (  PaginatedGridLayout,)

[//]: # (  SpeakerLayout,)

[//]: # (  useHasOngoingScreenshare,)

[//]: # (} from '@stream-io/video-react-sdk';)

[//]: # ()
[//]: # (const LayoutMap = {)

[//]: # (  Speaker: {)

[//]: # (    component: SpeakerLayout,)

[//]: # (    title: 'Speaker layout with spotlight',)

[//]: # (    props: {},)

[//]: # (  },)

[//]: # (  PaginatedGrid: {)

[//]: # (    component: PaginatedGridLayout,)

[//]: # (    title: 'Paginated grid layout',)

[//]: # (    props: {)

[//]: # (      groupSize: 12,)

[//]: # (    },)

[//]: # (  },)

[//]: # (};)

[//]: # ()
[//]: # (export const Stage = &#40;&#41; => {)

[//]: # (  const [selectedLayout, setSelectedLayout] =)

[//]: # (    useState<keyof typeof LayoutMap>&#40;'PaginatedGrid'&#41;;)

[//]: # (  const hasOngoingScreenshare = useHasOngoingScreenshare&#40;&#41;;)

[//]: # ()
[//]: # (  const LayoutComponent = LayoutMap[selectedLayout].component;)

[//]: # (  const componentProps = LayoutMap[selectedLayout].props;)

[//]: # ()
[//]: # (  useEffect&#40;&#40;&#41; => {)

[//]: # (    // set screen share compatible layout)

[//]: # (    if &#40;hasOngoingScreenshare&#41; return setSelectedLayout&#40;'Speaker'&#41;;)

[//]: # ()
[//]: # (    return setSelectedLayout&#40;'PaginatedGrid'&#41;;)

[//]: # (  }, [hasOngoingScreenshare]&#41;;)

[//]: # ()
[//]: # (  return <LayoutComponent {...componentProps} />;)

[//]: # (};)

[//]: # (```)

[//]: # ()
[//]: # (### Optional enhancements)

[//]: # ()
[//]: # (If your application supports more than two video layouts you might want to consider storing preferred layout in the `localStorage` so when your application toggles back - it switches to the preffered one.)

[//]: # ()
[//]: # (Consider using versioned persisted application states like the one in [Zustand]&#40;https://github.com/pmndrs/zustand#persist-middleware&#41;.)
