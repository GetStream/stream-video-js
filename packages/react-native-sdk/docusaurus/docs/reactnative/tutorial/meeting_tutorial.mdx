---
id: meeting-tutorial
sidebar_position: 1
title: Meeting Tutorial
---

This document explains how to integrate Stream Video to support Meetings in your Application.

In this tutorial, we are building a video call application using the Stream Video React SDK. We will be implementing a "Meeting Room" scenario, where users can join and leave the call independently, without causing the call to be terminated. The topics we are covering in this tutorial are:

- Setting up the project.
- Creating the call UI/screens using built-in components.
- Creating/Joining a new call.
- Leaving an existing call.
- View Participants info.

If you are looking to build a "Ring Call" scenario, where the call is dropped, once the number of participants is reduced to 1, then please, follow the guide [Tutorial (Call)](./call_tutorial).

To get started with the guide, ensure you have set up your [development environment for React Native](https://reactnative.dev/docs/environment-setup). Stream Chat supports creating applications using Expo and React Native CLI. But Stream Video currently only supports React Native CLI, so we will only focus on React Native CLI in this documentation.

## Create a new project

Create a new RN project with TypeScript

```bash
npx react-native init StreamMeetingTutorial --template react-native-template-typescript
```

## Install dependencies and initial setup

Install Stream's Video SDK and it's peer dependencies

```bash
yarn add stream-video-react-native stream-video-react-bindings stream-video react-native-webrtc
react-native-incall-manager react-native-svg text-encoding-polyfill
```

Some dependencies require us to make changes to our application for all
functionalities to be available. Please apply the following steps:

- `react-native-webrtc` installation on [Android](https://github.com/react-native-webrtc/react-native-webrtc/blob/master/Documentation/AndroidInstallation.md) and [iOS](https://github.com/react-native-webrtc/react-native-webrtc/blob/master/Documentation/iOSInstallation.md)
- `react-native-svg` be aware of [compatibility](https://github.com/software-mansion/react-native-svg#supported-react-native-versions) with RN versions and [troubleshooting](https://github.com/software-mansion/react-native-svg#troubleshooting) steps
- `react-native-incall-manager` installation on [Android](https://github.com/react-native-webrtc/react-native-incall-manager#android) and [iOS](https://github.com/react-native-webrtc/react-native-incall-manager#ios).

- Add the following imports at the top of your `index.js` file

```js title="index.js"
/** URL polyfill */
import 'text-encoding-polyfill';
/** Text decoder polyfill */
import 'react-native-url-polyfill/auto';
/** crypto.getRandomValues polyfill for uuid */
import 'react-native-get-random-values';
import { registerGlobals } from 'react-native-webrtc';
...

if (Platform.OS !== 'web') {
  registerGlobals();
}
```

## Creating and providing the Video Client

We will start by creating a simple video meeting with Stream's Video SDK.

### Create a StreamVideoClient

First things first we will create a `StreamVideoClient` that will be used to communicate to Stream's Video backend.
We will also create a `StreamVideoView` that will be used to render the video stream.

```tsx
import React from 'react';
import { StreamVideoClient } from '@stream-io/video-client';

const user = {
  id: 'micheal',
  name: 'Micheal',
  imageUrl: 'https://randomuser.me/api/portraits/men/44.jpg',
};
const USER_TOKEN = 'YOUR_TOKEN';
const API_KEY = 'YOUR_TOKEN';
const videoClient = new StreamVideoClient(API_KEY);
```

### Connecting and disconnecting from the video client

We will connect to the Stream's client instance we've created right after the component has mounted.
When the component un-mounts we will disconnect from the client.

```tsx
import React, {useEffect, useState} from 'react';
import {ActivityIndicator, SafeAreaView, StyleSheet} from 'react-native';

...
const App = () => {
  const [connected, setConnected] = useState(false);
  const [error, setError] = useState(undefined);

  useEffect(() => {
    const run = async () => {
      try {
        await videoClient.connect(user, USER_TOKEN);
        setConnected(true);
      } catch (err) {
        console.error('Failed to establish connection', err);
      }
    };
    run();

    return () => {
      videoClient.disconnect();
    };
  }, []);

  if (!connected) {
    return (
      <SafeAreaView style={{flex: 1}}>
        <ActivityIndicator size={'large'} style={StyleSheet.absoluteFill} />
      </SafeAreaView>
    );
  }

  return !error ? (
    <SafeAreaView style={{flex: 1}}>
      <Text>We're connected now and ready to go ðŸš€</Text>
    </SafeAreaView>
  ) : (
    <Text>{error}</Text>
  );
};
```

For simplicity you can also use this hook:

```tsx title="src/hooks/useVideoClient.tsx"
import { StreamVideoClient } from '@stream-io/video-client';
import { useEffect, useState } from 'react';
import { VideoProps } from '../types';

const APIParams = {
  apiKey: STREAM_API_KEY, // see <video>/data/fixtures/apps.yaml for API key/secret
};

export const useVideoClient = ({ user, token }: VideoProps) => {
  const [videoClient, setVideoClient] = useState<StreamVideoClient>();

  useEffect(() => {
    const run = async () => {
      try {
        if (user && token) {
          const client = new StreamVideoClient(APIParams.apiKey);
          await client.connectUser(user, token);
          setVideoClient(client);
        }
      } catch (err) {
        console.error('Failed to establish connection', err);
      }
    };

    run();
  }, [token, user]);

  return { videoClient };
};
```

### Provide the video client logic to the rest of the app

Our `StreamVideo` component will provide our recently created video client to the rest of the underlying components.

The `client` created above can be used as follows and needs to be provided to the `client` prop of the `StreamVideo` component.

_Note: Make sure to wrap your entire application in `StreamVideo`._

```tsx title="App.tsx"
import React from 'react';
import {ActivityIndicator, StyleSheet} from 'react-native';
import {StreamMeeting, StreamCall } from '@stream-io/video-react-native-sdk';
...

const App = () => {
  const {videoClient} = useVideoClient({
    user: user,
    token: user?.token,
  });

  if (!videoClient) {
    return <ActivityIndicator size={'large'} style={StyleSheet.absoluteFill} />;
  }

  return (
    <StreamVideo client={videoClient}>
      {children}
    </StreamVideo>
  );
};
```

## Planning the Screens

The app is supposed to have 4 screens each for entering meeting id, lobby view, active call and call participants info screen.

We use [react-navigation](http://reactnavigation.org/) to set up the navigator. To do this, we will firstly define the types.

```tsx title="src/types.ts"
export type NavigationStackParamsList = {
  CallLobbyScreen: { callId: string };
  ActiveCallScreen: undefined;
  CallParticipantsInfoScreen: undefined;
  JoinMeetingScreen: undefined;
};
```

Finally setup the stack navigator and the stack screen.

```tsx title="App.tsx"
import React from 'react';
import { NavigationStackParamsList } from './src/types';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import { NavigationContainer } from '@react-navigation/native';
import { StreamVideo } from '@stream-io/video-react-native-sdk';
import { JoinMeetingScreen } from './src/screens/JoinMeetingScreen';
import { LobbyViewScreen } from './src/screens/LobbyViewScreen';
import { ActiveCallScreen } from './src/screens/ActiveCallScreen';
import { CallParticipansInfoScreen } from './src/screens/CallParticipantsInfoScreen';

const Stack = createNativeStackNavigator<NavigationStackParamsList>();

const Navigator = () => {
  ...

  return (
    <StreamVideo client={videoClient}>
      <Stack.Navigator>
        <Stack.Screen
          name="JoinMeetingScreen"
          component={JoinMeetingScreen}
        />
        <Stack.Screen
          name="CallLobbyScreen"
          component={LobbyViewScreen}
        />
        <Stack.Screen
          name="ActiveCallScreen"
          component={ActiveCallScreen}
          options={{ headerShown: false }}
        />
        <Stack.Screen
          name="CallParticipantsInfoScreen"
          component={CallParticipansInfoScreen}
        />
      </Stack.Navigator>
    </StreamVideo>
  );
};

function App(): JSX.Element {
  return (
    <NavigationContainer>
      <Navigator />
    </NavigationContainer>
  );
}

export default App;
```

### Join Meeting screen

This screen is required to have a text input where the id of the meeting to be joined can be entered and a button to create/start the call.

We can use the create call button to show/navigate to LobbyView component/screen.

Our implementation of this screen is as follows:

```tsx title="src/screens/JoinMeetingScreen.tsx"
import React, { useCallback, useState } from 'react';
import { TextInput, SafeAreaView, View, Text, Button } from 'react-native';

import { NativeStackScreenProps } from '@react-navigation/native-stack';
import { NavigationStackParamsList } from '../types';

type JoinMeetingScreenProps = NativeStackScreenProps<
  NavigationStackParamsList,
  'JoinMeetingScreen'
>;

export const JoinMeetingScreen = (props: JoinMeetingScreenProps) => {
  const [callID, setCallId] = useState('');
  const { navigation } = props;

  const joinCallHandler = useCallback(() => {
    navigation.navigate('CallLobbyScreen', { callId: callID });
  }, [navigation, callID]);

  return (
    <SafeAreaView>
      <View>
        <Text>{'Whats the call ID?'}</Text>
      </View>
      <TextInput
        value={callID}
        onChangeText={(text) => setCallId(text.trim().split(' ').join('-'))}
      />
      <Button
        title={'Create meeting with callID: ' + callID}
        color="blue"
        disabled={!callID}
        onPress={joinCallHandler}
      />
    </SafeAreaView>
  );
};
```

### Render the Lobby View component

To render the call lobby component, you can import `LobbyView` component from the Video SDK and use it in the Screen/View. `LobbyView` component expects a meeting id that will be used to join the call.
When the join button in the Call Lobby Screen is pressed the call is joined and the navigation to the active call screen is done using handler `onActiveCall` that it expects. You can also pass your custom logic for the handler.

_Note: We navigate to Active Call screen in our tutorial._

```tsx title="src/screens/LobbyViewScreen.tsx"
import React from 'react';
import { LobbyView } from '@stream-io/video-react-native-sdk';
import { NativeStackScreenProps } from '@react-navigation/native-stack';
import { NavigationStackParamsList } from '../types';

type CallLobbyScreenProps = NativeStackScreenProps<
  NavigationStackParamsList,
  'CallLobbyScreen'
>;

export const LobbyViewScreen = (props: CallLobbyScreenProps) => {
  const { navigation, route } = props;
  const {
    params: { callId },
  } = route;

  // Handler used to navigate to Active Call Screen
  const onActiveCall = () => {
    navigation.navigate('ActiveCallScreen');
  };

  return <LobbyView callID={callId} onActiveCall={onActiveCall} />;
};
```

### Rendering the Active call view

To render the active call view, you can import `ActiveCall` component from the Video SDK and use it in the Screen/View where you want to render it. This component expects two handlers to deal with the case of what should happen when the call is hanged up(`onHangupCall`) or when user clicks on the Participants View icon(`onOpenCallParticipantsInfoView`).

```tsx title="src/screens/ActiveCallScreen.tsx"
import React, { useCallback } from 'react';
import { ActiveCall, useActiveCall } from '@stream-io/video-react-native-sdk';
import { ActivityIndicator, StyleSheet } from 'react-native';
import { NavigationStackParamsList } from '../types';
import { NativeStackScreenProps } from '@react-navigation/native-stack';

type ActiveCallScreenProps = NativeStackScreenProps<
  NavigationStackParamsList,
  'ActiveCallScreen'
>;

export const ActiveCallScreen = ({ navigation }: ActiveCallScreenProps) => {
  const activeCall = useActiveCall();

  // Handler executed when the call is hung up.
  const onHangupCall = useCallback(() => {
    navigation.navigate('JoinMeetingScreen');
  }, [navigation]);

  // Handler executed when the call participants icon is clicked. This is used to render CallParticipantsInfoView.
  const onOpenCallParticipantsInfoViewHandler = useCallback(() => {
    navigation.navigate('CallParticipantsInfoScreen');
  }, [navigation]);

  // Since the call takes time to join we show an activityindicator until then.
  if (!activeCall) {
    return <ActivityIndicator size={'large'} style={StyleSheet.absoluteFill} />;
  }
  return (
    <ActiveCall
      onHangupCall={onHangupCall}
      onOpenCallParticipantsInfoView={onOpenCallParticipantsInfoViewHandler}
    />
  );
};
```

### Rendering the CallParticipantsInfoView component

To render the call participants info view, you can import `CallParticipantsInfoView` from the Video SDK and use it in the Screen/View where you want to render it.

```tsx title="src/screens/CallParticipansInfoScreen.tsx"
import React from 'react';
import { CallParticipantsInfoView } from '@stream-io/video-react-native-sdk';

export const CallParticipansInfoScreen = () => {
  return <CallParticipantsInfoView />;
};
```
