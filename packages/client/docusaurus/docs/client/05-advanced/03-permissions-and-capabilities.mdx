---
id: 03-permissions-and-capabilities
title: Permissions and Capabilities
---

import SDKSpecific from '../SDKSpecific';

## Introduction

In some types of calls, there is a common requirement for participant moderation.
A typical example is a webinar where the host wants to control who can speak or who can share their video or screen.

Stream Video SDK provides a certain set of permissions and capabilities
that can be used to control the behavior of participants in a call.

## Permissions

As soon as you join a call, the `Call` instance would allow you to check the permissions of the local user
or perform some permission-related actions:

### Check permissions

```ts
import { OwnCapability } from '@stream-io/video-client';

const call = streamVideoClient.call(type, id);
const canSendAudio = call.permissionsContext.hasPermission(
  OwnCapability.SEND_AUDIO,
);
```

<SDKSpecific name="react">
In our React Video SDK, you can use the [`useHasPermissions`](../04-call-engine/hooks.md#useHasPermissions) hook to check for permissions.

```tsx
const canSendAudio = useHasPermissions(OwnCapability.SEND_AUDIO);
```

</SDKSpecific>

### Request permissions

Every user may request permissions to perform certain action depending on the call type and call settings.
For example, in an audio-room call type, only the hosts have `send-audio` permission by default.
Other users should request this permission before they can start sending audio if the call settings allow it.

```ts
import { OwnCapability } from '@stream-io/video-client';

const call = streamVideoClient.call(type, id);
if (!call.permissionsContext.canRequest(OwnCapability.SEND_AUDIO)) {
  console.log('The host has disabled the ability to request this permission');
  return;
}
await call.requestPermissions({
  permissions: [OwnCapability.SEND_AUDIO],
});
```

### Approving permission requests

Call hosts and moderators can approve permission requests from other users.
Whenever a user requests a permission, a `call.permission_request` event will be emitted on the `Call` instance.
You can listen to this event and approve the request.

```ts
import { PermissionRequestEvent } from '@stream-io/video-client';

const call = streamVideoClient.call(type, id);
call.on('permission_request', async (request: PermissionRequestEvent) => {
  if (shouldApproveRequest(request)) {
    await call.updateUserPermissions({
      user_id: request.user_id,
      grant_permissions: [...request.permissions],
    });
  }
});
```

### Moderation

At any time, a moderator or host can decide to either grant or revoke certain permission to any participant.

```ts
import { OwnCapability } from '@stream-io/video-client';
const call = streamVideoClient.call(type, id);
await call.updateUserPermissions({
  user_id: 'demo-user',
  grant_permission: [OwnCapability.SEND_AUDIO, OwnCapability.SEND_VIDEO],
  revoke_permissions: [OwnCapability.SCREENSHARE],
});
```

The end user would get notified via a WebSocket event with a type: `call.permissions_updated`.
In the case of revoked permissions, the SDK would automatically stop publishing the appropriate tracks.

## Capabilities

Every user connecting to a Stream Call, has a set of [Capabilities](../).
The capabilities of the local user live in the metadata of the `Call` instance.

```tsx
const call = streamVideoClient.call(type, id);
const { own_capabilities } = call.state.metadata;
```

<SDKSpecific name="react">
  In our React Video SDK, you can use the [`useOwnCapabilities`](../04-call-engine/hooks.md#useOwnCapabilities) hook.

```tsx
const ownCapabilities = useOwnCapabilities();
```

</SDKSpecific>
