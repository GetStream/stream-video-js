---
id: closed-captions
title: Closed captions
description: How to add closed captions to your calls
---

The Stream API supports adding real-time closed captions (subtitles for participants) to your calls. This guide shows you how to implement this feature on the client side.

## Prerequisites

Make sure that the closed caption feature is enabled in your app's dashboard. The closed caption feature can be set on the call type level, and the available options are:

- `available`: the feature is available for your call and can be enabled.
- `disabled`: the feature is not available for your call. In this case, it's a good idea to "hide" any UI element you have related to closed captions.
- `auto-on`: the feature is available and will be enabled automatically once the user is connected to the call.

It's also possible to override the call type's default when creating a call:

```ts
await call.getOrCreate({
  data: {
    settings_override: {
      transcription: {
        mode: 'available',
        closed_caption_mode: 'available',
      },
    },
  },
});
```

You can check the current value like this:

```typescript
console.log(call.state.settings?.transcription.closed_caption_mode);
```

## Enabling and disabling closed caption events

If you set `closed_caption_mode` to `available` you need to enable closed caption events when you want to see captions:

```typescript
await this.call.startClosedCaptions();

// to disable them
await this.call.stopClosedCaptions();
```

## Displaying the captions

You can access the most recent captions using the call state:

```typescript
call.state.closedCaptions$.subscribe((captions) =>
  updateDisplayedCaptions(captions),
);

const updateDisplayedCaptions(captions: CallClosedCaption[]) {
  const innerHTML = captions
    .map((caption) => `<b>${caption.speaker_name}:</b> ${caption.text}`)
    .join('<br>');
}
```

This is how an example closed caption looks like:

```json
{
  "text": "Thank you, guys, for listening.",
  // When did the speaker start speaking
  "start_time": "2024-09-25T12:22:21.310735726Z",
  // When did the speaker finish saying the caption
  "end_time": "2024-09-25T12:22:24.310735726Z",
  "speaker_id": "zitaszuperagetstreamio",
  "speaker_name": "Zita"
}
```

## Closed caption configuration

You can tweak the caption display logic using `updateClosedCaptionSettings` method:

```typescript
call.updateClosedCaptionSettings({
  // The maximum number of closed captions to keep in the queue, default is 2
  queueSize: 2,
  // The time in milliseconds to keep a closed caption in the queue, default is 2700ms
  retentionTimeInMs: 2700,
});
```

## See it in action

To see it all in action check out our TypeScript sample application on [GitHub](https://github.com/GetStream/stream-video-js/tree/main/sample-apps/client/ts-quickstart) or in [Codesandbox](https://codesandbox.io/p/sandbox/eloquent-glitter-99th3v).
