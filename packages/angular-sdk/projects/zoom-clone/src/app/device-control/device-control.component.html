<div class="device-controls">
  <button mat-icon-button>
    <mat-icon (click)="toggleAudio()" [fontIcon]="audioState === 'off' ? 'mic_off' : 'mic'"></mat-icon>
  </button>
  <button mat-icon-button>
    <mat-icon (click)="toggleVideo()" [fontIcon]="videoState === 'off' ? 'videocam_off' : 'videocam'"></mat-icon>
  </button>
  <button mat-icon-button>
    <mat-icon fontIcon="settings" [matMenuTriggerFor]="menu"></mat-icon>
  </button>
</div>
<mat-menu #menu="matMenu">
  <div class="device-menu">
    <mat-form-field appearance="outline">
      <mat-label>Audio</mat-label>
      <mat-select [value]="audioDevice$ | async" (valueChange)="selectAudioDevice($event)">
        <mat-option *ngFor="let device of (audioDevices$ | async)" [value]="device.deviceId">
          {{device.label}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Video</mat-label>
      <mat-select [value]="videoDevice$ | async" (valueChange)="selectVideoDevice($event)">
        <mat-option *ngFor="let device of (videoDevices$ | async)" [value]="device.deviceId">
          {{device.label}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Audio output</mat-label>
      <mat-select [value]="audioOutputDevice$ | async" (valueChange)="selectAudioOutputDevice($event)">
        <mat-option *ngFor="let device of (audioOutputDevices$ | async)" [value]="device.deviceId">
          {{device.label}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
</mat-menu>
