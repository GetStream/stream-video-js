<div class="container">
  <div class="call str-video__theme-variables">
    <div
      class="participants"
      [class.multiple]="
        (remoteParticipants$ | async)!.length > 1 ||
        (hasScreenshare$ | async) === true
      "
      [class.screenshare]="(hasScreenshare$ | async) === true"
      [class.only-host]="
        (remoteParticipants$ | async)!.length === 0 &&
        (hasScreenshare$ | async) === false
      "
    >
      <ng-container
        *ngIf="(hasScreenshare$ | async) === false; else screenshare"
      >
        <stream-participant
          *ngFor="
            let participant of remoteParticipants$ | async;
            trackBy: trackBySessionId
          "
          [participant]="participant"
        ></stream-participant>
      </ng-container>
      <stream-participant
        cdkDrag
        class="local-participant"
        *ngIf="localParticipant$ | async as participant"
        [participant]="participant"
      ></stream-participant>
    </div>
    <ng-template #screenshare>
      <stream-participant
        *ngIf="(hasScreenshare$ | async) === true"
        kind="screen"
        [participant]="(screenSharingParticipant$ | async)!"
      ></stream-participant>
      <div class="remote-participants">
        <stream-participant
          *ngFor="
            let participant of remoteParticipants$ | async;
            trackBy: trackBySessionId
          "
          [participant]="participant"
        ></stream-participant>
      </div>
    </ng-template>
    <div class="toolbar">
      <div class="left-side">
        <app-device-control></app-device-control>
        <button
          mat-icon-button
          [color]="isCallRecordingInProgress ? 'warn' : 'none'"
          (click)="toggleRecording()"
        >
          <mat-icon fontIcon="radio_button_checked"></mat-icon>
        </button>
      </div>
      <div>
        <button mat-icon-button color="warn">
          <mat-icon (click)="endCall()" fontIcon="call_end"></mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>
